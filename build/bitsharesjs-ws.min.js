!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.t=n();else if("function"==typeof define&&define.i)define([],n);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).o=n()}}(function(){return function n(t,e,i){function o(c,s){if(!e[c]){if(!t[c]){var u="function"==typeof require&&require;if(!s&&u)return u(c,!0);if(r)return r(c,!0);var f=new Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f}var a=e[c]={t:{}};t[c][0].call(a.t,function(n){var e=t[c][1][n];return o(e||n)},a,a.t,n,t,e,i)}return e[c].t}for(var r="function"==typeof require&&require,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(n,t,e){(function(i){"use strict";function o(n){return n&&n.s?n:{default:n}}function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}e.s=!0;var c=o(n("./ChainWebSocket")),s=o(n("./GrapheneApi")),u=o(n("./ChainConfig"));if(i)i.u="";else;var f=!0;e.default={h:function(n){this.l=n,inst&&inst.h(n)},v:function(n){f=n},reset:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",t=this,e=arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;return this.close().then(function(){return inst=new a,inst.h(t.l),inst&&e&&inst.connect(n,i),inst})},p:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",t=arguments[1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3,i=arguments[3],o=arguments[4];return inst||(inst=new a,inst.h(this.l)),inst&&t&&inst.connect(n,e,i),o&&(inst.m=o),inst},_:function(){return Apis.p().k},close:function(){return inst?new Promise(function(n){inst.close().then(function(){inst=null,n()})}):Promise.resolve()}};var a=function(){function n(){r(this,n)}return n.prototype.connect=function(n,t){var e=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.url=n;if("undefined"!=typeof window&&window.location&&"https:"===window.location.protocol&&n.indexOf("wss://")<0)throw new Error("Secure domains require wss connection");this.S&&(this.S.l=null),this.S=new c.default(n,this.l,t,f,function(){e.T&&e.T.exec("get_objects",[["2.1.0"]]).catch(function(n){})}),this.g=this.S.W("","").then(function(){console.log("Connected to API node:",n),e.T=new s.default(e.S,"database"),e.C=new s.default(e.S,"network_broadcast"),e.R=new s.default(e.S,"history"),i&&(e.P=new s.default(e.S,"crypto"));var t=e.T.init().then(function(){return e.T.exec("get_chain_id",[]).then(function(n){return e.k=n,u.default.I(n)})});e.S.O=function(){e.S&&e.S.W("","").then(function(){e.T.init().then(function(){e.l&&e.l("reconnect")}),e.C.init(),e.R.init(),i&&e.P.init()})},e.S.A=function(){e.close().then(function(){e.m&&e.m()})};var o=[t,e.C.init(),e.R.init()];return i&&o.push(e.P.init()),Promise.all(o)})},n.prototype.close=function(){var n=this;return this.S&&1===this.S.G.readyState?this.S.close().then(function(){n.S=null}):(this.S=null,Promise.resolve())},n.prototype.N=function(){return this.T},n.prototype.U=function(){return this.C},n.prototype.q=function(){return this.R},n.prototype.D=function(){return this.P},n.prototype.h=function(n){this.l=n},n}();t.t=e.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{H:2,M:3,j:4}],2:[function(n,t,e){(function(n){"use strict";e.s=!0;var i=void 0,o={B:n.J.F||"GPH"};i={L:"CORE",B:"GPH",V:15,K:86400,X:86400,Y:{Z:{L:"BTS",B:"BTS",k:"4018d7844c78f6a6c41c6a552b898022310fc5dec06da467ee7905a8dad512c8"},$:{L:"MUSE",B:"MUSE",k:"45ad2d3f9ef92a49b55c2227eb06123f613bb35dd08bd876f2aea21925a67a67"},nn:{L:"TEST",B:"TEST",k:"39f5e2ede1f8bc1a3a54a7914414e3779e33193f1f5693510e73cb7a87617447"},tn:{L:"GOV",B:"FEW",k:"1cfde7c388b9e8ac06462d68aadbd966b58f88797637d9af805b4560b0e9661e"}},I:function(n){var t=void 0,e=void 0,r=void 0,c=void 0,s=void 0;for(t=0,e=(s=Object.keys(i.Y)).length;t<e;t++)if(c=s[t],(r=i.Y[c]).k===n)return i.en=c,r.B&&(i.B=r.B,o.B=r.B),{en:c,in:r};i.en||console.log("Unknown chain id (this may be a testnet)",n)},reset:function(){i.L="CORE",i.B="GPH",o.B="GPH",i.V=15,i.K=86400,console.log("Chain config reset")},on:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GPH";i.B=n,o.B=n}},e.default=i,t.t=e.default}).call(this,n("_process"))},{rn:7}],3:[function(n,t,e){(function(i){"use strict";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function r(n){return n||"undefined"==typeof WebSocket||"undefined"==typeof document?c:WebSocket}e.s=!0;var c=void 0;c="undefined"!=typeof WebSocket||i.J.cn?"undefined"!=typeof WebSocket&&"undefined"!=typeof document?n("ReconnectingWebSocket"):WebSocket:n("ws");var s=5,u=2*s,f=function(){function n(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,c=this,f=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;o(this,n),this.url=t,this.l=e,this.sn=setTimeout(function(){if(c.un){var n=c.un;c.un=null,c.G.terminate?c.G.terminate():c.G.close(),n(new Error("Connection attempt timed out: "+t))}},i);var h=r(f);try{this.G=new h(t)}catch(n){console.error("invalid websocket URL:",n,t),this.G=new h("wss://127.0.0.1:8090")}this.G.fn=5e3,this.un=null,this.O=null,this.an=s,this.hn=u,this.ln=a,this.dn=new Promise(function(n,t){c.un=t,c.G.onopen=function(){clearTimeout(c.sn),c.l&&c.l("open"),c.O&&c.O(),c.vn=setInterval(function(){if(c.hn--,0==c.hn)return console.error("keep alive timeout."),c.G.terminate?c.G.terminate():c.G.close(),clearInterval(c.vn),void(c.vn=void 0);c.an--,0==c.an&&(c.ln&&c.ln(),c.an=s)},5e3),c.un=null,n()},c.G.onerror=function(n){c.vn&&(clearInterval(c.vn),c.vn=void 0),clearTimeout(c.sn),c.l&&c.l("error"),c.un&&c.un(n)},c.G.onmessage=function(n){c.hn=u,c.listener(JSON.parse(n.data))},c.G.onclose=function(){c.vn&&(clearInterval(c.vn),c.vn=void 0);for(var n=new Error("connection closed"),t=c.bn+1;t<=c.wn;t+=1)c.pn[t].reject(n);c.l&&c.l("closed"),c.mn&&c.mn(),c.A&&c.A()}}),this.wn=0,this.bn=0,this.pn={},this._n={},this.kn={}}return n.prototype.call=function(n){var t=this;if(1!==this.G.readyState)return Promise.reject(new Error("websocket state error:"+this.G.readyState));var e=n[1];if(this.wn+=1,"set_subscribe_callback"!==e&&"subscribe_to_market"!==e&&"broadcast_transaction_with_callback"!==e&&"set_pending_transaction_callback"!==e||(this._n[this.wn]={Sn:n[2][0]},n[2][0]=this.wn),"unsubscribe_from_market"===e||"unsubscribe_from_accounts"===e){if("function"!=typeof n[2][0])throw new Error("First parameter of unsub must be the original callback");var i=n[2].splice(0,1)[0];for(var o in this._n)if(this._n[o].Sn===i){this.kn[this.wn]=o;break}}var r={method:"call",yn:n};return r.id=this.wn,this.an=s,new Promise(function(n,e){t.pn[t.wn]={time:new Date,resolve:n,reject:e},t.G.send(JSON.stringify(r))})},n.prototype.listener=function(n){var t=!1,e=null;"notice"===n.method&&(t=!0,n.id=n.yn[0]),t?e=this._n[n.id].Sn:(e=this.pn[n.id],this.bn=n.id),e&&!t?(n.error?e.reject(n.error):e.resolve(n.result),delete this.pn[n.id],this.kn[n.id]&&(delete this._n[this.kn[n.id]],delete this.kn[n.id])):e&&t?e(n.yn[1]):console.log("Warning: unknown websocket response: ",n)},n.prototype.W=function(n,t){var e=this;return this.dn.then(function(){return e.call([1,"login",[n,t]])})},n.prototype.close=function(){var n=this;return new Promise(function(t){n.mn=function(){t(),n.mn=null},n.G.close(),3===n.G.readyState&&t()})},n}();e.default=f,t.t=e.default}).call(this,n("_process"))},{Tn:5,rn:7,G:6}],4:[function(n,t,e){"use strict";function i(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}e.s=!0;var o=function(){function n(t,e){i(this,n),this.S=t,this.gn=e}return n.prototype.init=function(){var n=this;return this.S.call([1,this.gn,[]]).then(function(t){return n.Wn=t,n})},n.prototype.exec=function(n,t){return this.S.call([this.Wn,n,t]).catch(function(e){throw console.log("!!! GrapheneApi error: ",n,t,e,JSON.stringify(e)),e})},n}();e.default=o,t.t=e.default},{}],5:[function(n,t,e){!function(n,e){void 0!==t&&t.t?t.t=e():n.Tn=e()}(this,function(){function n(t,e,i){function o(n,t){var e=document.createEvent("CustomEvent");return e.initCustomEvent(n,!1,!1,t),e}var r={debug:!1,En:!0,Cn:1e3,Rn:3e4,Pn:1.5,fn:2e3,xn:null,binaryType:"blob"};i||(i={});for(var c in r)void 0!==i[c]?this[c]=i[c]:this[c]=r[c];this.url=t,this.In=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var s,u=this,f=!1,a=!1,h=null,l=document.createElement("div");l.addEventListener("open",function(n){u.onopen(n)}),l.addEventListener("close",function(n){u.onclose(n)}),l.addEventListener("connecting",function(n){u.On(n)}),l.addEventListener("message",function(n){u.onmessage(n)}),l.addEventListener("error",function(n){u.onerror(n)}),this.addEventListener=l.addEventListener.bind(l),this.removeEventListener=l.removeEventListener.bind(l),this.dispatchEvent=l.dispatchEvent.bind(l),this.open=function(t){if(s=new WebSocket(u.url,e||[]),s.binaryType=this.binaryType,t){if(this.xn&&this.In>this.xn)return}else l.dispatchEvent(o("connecting")),this.In=0;(u.debug||n.An)&&console.debug("ReconnectingWebSocket","attempt-connect",u.url);var i=s,r=setTimeout(function(){(u.debug||n.An)&&console.debug("ReconnectingWebSocket","connection-timeout",u.url),a=!0,i.close(),a=!1},u.fn);s.onopen=function(e){clearTimeout(r),(u.debug||n.An)&&console.debug("ReconnectingWebSocket","onopen",u.url),u.protocol=s.protocol,u.readyState=WebSocket.OPEN,u.In=0;var i=o("open");i.Gn=t,t=!1,l.dispatchEvent(i)},s.onclose=function(e){if(clearTimeout(r),s=null,f)u.readyState=WebSocket.CLOSED,l.dispatchEvent(o("close"));else{u.readyState=WebSocket.CONNECTING;var i=o("connecting");i.code=e.code,i.reason=e.reason,i.wasClean=e.wasClean,l.dispatchEvent(i),t||a||((u.debug||n.An)&&console.debug("ReconnectingWebSocket","onclose",u.url),l.dispatchEvent(o("close")));var r=u.Cn*Math.pow(u.Pn,u.In);h=setTimeout(function(){u.In++,u.open(!0)},r>u.Rn?u.Rn:r)}},s.onmessage=function(t){(u.debug||n.An)&&console.debug("ReconnectingWebSocket","onmessage",u.url,t.data);var e=o("message");e.data=t.data,l.dispatchEvent(e)},s.onerror=function(t){(u.debug||n.An)&&console.debug("ReconnectingWebSocket","onerror",u.url,t),l.dispatchEvent(o("error"))}},1==this.En&&this.open(!1),this.send=function(t){if(s)return(u.debug||n.An)&&console.debug("ReconnectingWebSocket","send",u.url,t),s.send(t);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(n,t){void 0===n&&(n=1e3),f=!0,s&&s.close(n,t),h&&(clearTimeout(h),h=null)},this.refresh=function(){s&&s.close()}}if("undefined"!=typeof window&&"WebSocket"in window)return n.prototype.onopen=function(n){},n.prototype.onclose=function(n){},n.prototype.On=function(n){},n.prototype.onmessage=function(n){},n.prototype.onerror=function(n){},n.An=!1,n.CONNECTING=WebSocket.CONNECTING,n.OPEN=WebSocket.OPEN,n.CLOSING=WebSocket.CLOSING,n.CLOSED=WebSocket.CLOSED,n})},{}],6:[function(n,t,e){},{}],7:[function(n,t,e){function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(n){if(h===setTimeout)return setTimeout(n,0);if((h===i||!h)&&setTimeout)return h=setTimeout,setTimeout(n,0);try{return h(n,0)}catch(t){try{return h.call(null,n,0)}catch(t){return h.call(this,n,0)}}}function c(n){if(l===clearTimeout)return clearTimeout(n);if((l===o||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(n);try{return l(n)}catch(t){try{return l.call(null,n)}catch(t){return l.call(this,n)}}}function s(){w&&v&&(w=!1,v.length?b=v.concat(b):p=-1,b.length&&u())}function u(){if(!w){var n=r(s);w=!0;for(var t=b.length;t;){for(v=b,b=[];++p<t;)v&&v[p].Nn();p=-1,t=b.length}v=null,w=!1,c(n)}}function f(n,t){this.Un=n,this.qn=t}function a(){}var h,l,d=t.t={};!function(){try{h="function"==typeof setTimeout?setTimeout:i}catch(n){h=i}try{l="function"==typeof clearTimeout?clearTimeout:o}catch(n){l=o}}();var v,b=[],w=!1,p=-1;d.Dn=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];b.push(new f(n,t)),1!==b.length||w||r(u)},f.prototype.Nn=function(){this.Un.apply(null,this.qn)},d.title="browser",d.cn=!0,d.J={},d.Hn=[],d.version="",d.Mn={},d.jn=a,d.addListener=a,d.Bn=a,d.Fn=a,d.removeListener=a,d.Jn=a,d.Ln=a,d.Vn=a,d.zn=a,d.Kn=function(n){return[]},d.Qn=function(n){throw new Error("process.binding is not supported")},d.Xn=function(){return"/"},d.Yn=function(n){throw new Error("process.chdir is not supported")},d.Zn=function(){return 0}},{}]},{},[1])(1)});